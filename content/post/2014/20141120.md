---
title: "イメージファイルの圧縮"
date: 2014-11-20T09:00:00+09:00
draft: false
---
kvmでゲストOSをqcow2で運用していると、だんだんとイメージファイルのサイズが大きくなってくる。これをqemu-imgで圧縮するのだが、70G程度あるイメージファイルを圧縮するのに2時間弱かかる。この間ゲストOSを止めておくことができないばあいは、以下の手順だとダウンタイムが少なくてすむ。

1. ゲストOSの停止
1. スナップショット作成
* スナップショットで起動
* イメージファイル（本体）の圧縮
* スナップショットの統合

